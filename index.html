<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Presenter</title>

    <script type="text/javascript" src="script.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css" media="all">
</head>
<body>
<main></main>

<script>
    (function(e) {
		let storage = new Storage();
		let gui = new GUI(e);

    	gui.addSongAddListener(fn => storage.addSong(fn))
            .addSongChangeListener(fn => storage.changeSong(fn))
            .addSongRemoveListener(fn => storage.removeSong(fn));

    	storage.addOnLoadListener(s => {
    		s.songs.forEach(song => gui.addSong(song));
        });
		new DragNDrop(e, ['text/plain'], 'over').onFileLoaded(text => {
			gui.addSong(CCLISong.parse(text));
		}).onError(console.log);
	})(element.from('main'));
</script>
</body>
</html>